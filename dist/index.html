<!doctype html><html lang=en><head><meta charset=UTF-8><meta content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no,viewport-fit=cover" name=viewport><meta content=yes name=mobile-web-app-capable><meta content=yes name=apple-mobile-web-app-capable><title>‚üÅ PulseQuest</title><style>:root{--bg:#070a16;--card:#0f1420;--text:#e8edf5;--stroke:#1e2738;--accent:#6ca8ff;--beacon:#ffd166;--empty:#1a2332}*{margin:0;padding:0;box-sizing:border-box}body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;background:var(--bg);color:var(--text);overflow:hidden;width:100vw;height:100vh;display:flex;align-items:center;justify-content:center}.shell{width:100%;height:100%;max-width:900px;max-height:700px;display:flex;flex-direction:column;padding:20px}.card{flex:1;display:flex;flex-direction:column;background:var(--card);border:1px solid var(--stroke);border-radius:20px;overflow:hidden;position:relative}.hud{display:flex;align-items:center;justify-content:space-between;padding:16px 20px;border-bottom:1px solid var(--stroke);background:rgba(0,0,0,.2)}.title{font-size:20px;font-weight:800;color:var(--beacon)}.info{font-size:14px;color:var(--text)}.stage{flex:1;padding:20px;display:flex;flex-direction:column;align-items:center;justify-content:center;position:relative;touch-action:none}#grid{width:100%;max-width:100%;max-height:100%;aspect-ratio:21/7;display:grid;grid-template-columns:repeat(21,1fr);gap:1px;padding:4px;background:rgba(0,0,0,.5);border:1px solid var(--stroke);border-radius:12px}.cell{width:100%;aspect-ratio:1;max-width:36px;max-height:36px;border-radius:4px;display:flex;align-items:center;justify-content:center;position:relative;background:var(--empty);border:1px solid rgba(46,229,157,.12)}.cell.beacon{background:#3d2f1a;border-color:rgba(255,209,102,.35)}.cell.wall{background:#2a3142;border-color:rgba(255,255,255,.08)}.player{font-size:18px;filter:drop-shadow(0 2px 4px rgba(0, 0, 0, .5))}.icon{font-size:18px}.compass{position:absolute;top:20px;right:20px;width:80px;height:80px;background:rgba(0,0,0,.5);border:2px solid var(--stroke);border-radius:50%;display:flex;align-items:center;justify-content:center;z-index:10}.compass-inner{position:relative;width:60px;height:60px}.compass-arrow{position:absolute;font-size:16px;opacity:.3;transition:opacity .3s,transform .3s}.compass-arrow.active{opacity:1;color:#ffd166;transform:scale(1.3);filter:drop-shadow(0 0 8px #ffd166)}.compass-arrow.n{top:0;left:50%;transform:translateX(-50%)}.compass-arrow.n.active{transform:translateX(-50%) scale(1.3)}.compass-arrow.e{top:50%;right:0;transform:translateY(-50%)}.compass-arrow.e.active{transform:translateY(-50%) scale(1.3)}.compass-arrow.s{bottom:0;left:50%;transform:translateX(-50%)}.compass-arrow.s.active{transform:translateX(-50%) scale(1.3)}.compass-arrow.w{top:50%;left:0;transform:translateY(-50%)}.compass-arrow.w.active{transform:translateY(-50%) scale(1.3)}.drawer{position:absolute;top:0;right:0;bottom:0;width:280px;background:rgba(10,15,30,.98);border-left:1px solid var(--stroke);z-index:1000;transform:translateX(100%);transition:transform .4s cubic-bezier(.16, 1, .3, 1);display:flex;flex-direction:column;backdrop-filter:blur(24px);box-shadow:-20px 0 50px rgba(0,0,0,.8)}.drawer.open{transform:translateX(0)}.drawer-header{padding:24px 20px 10px;display:flex;align-items:center;justify-content:space-between}.drawer h3{font-size:20px;color:var(--beacon);font-weight:800;margin:0}.close-btn{background:rgba(255,255,255,.05);border:none;color:#fff;width:36px;height:36px;border-radius:50%;font-size:24px;cursor:pointer;display:flex;align-items:center;justify-content:center}.settings{flex:1;display:flex;flex-direction:column;gap:14px;padding:20px;overflow-y:auto}.settings label,.settings select{width:100%;text-align:left;font-size:14px;background:linear-gradient(135deg,rgba(255,255,255,.08),rgba(255,255,255,.03));padding:16px;border-radius:12px;border:1px solid var(--stroke);color:var(--text);cursor:pointer;transition:all .2s;font-weight:500}.settings select:hover{background:linear-gradient(135deg,rgba(255,255,255,.12),rgba(255,255,255,.06));border-color:var(--accent);transform:translateY(-1px)}.settings select:focus{outline:0;border-color:var(--accent);box-shadow:0 0 0 3px rgba(108,168,255,.1)}.settings select option{background:#0f1420;color:var(--text);padding:10px}.menu-btn{background:linear-gradient(135deg,rgba(255,255,255,.08),rgba(255,255,255,.03));border:1px solid var(--stroke);color:var(--text);padding:8px 12px;border-radius:8px;cursor:pointer;font-size:16px;font-weight:600;transition:all .2s;display:inline-flex;align-items:center;gap:6px}.menu-btn:hover{background:linear-gradient(135deg,rgba(255,255,255,.12),rgba(255,255,255,.06));border-color:var(--accent);transform:translateY(-1px);box-shadow:0 4px 12px rgba(0,0,0,.3)}.menu-btn:active{transform:translateY(0)}.tap-hint{position:absolute;bottom:20px;left:50%;transform:translateX(-50%);background:rgba(0,0,0,.6);padding:8px 16px;border-radius:99px;font-size:13px;color:#aaa;pointer-events:none;border:1px solid var(--stroke)}.input-flash{position:fixed;width:60px;height:60px;background:rgba(108,168,255,.6);border-radius:50%;pointer-events:none;z-index:2000;transform:translate(-50%,-50%) scale(0);animation:flashIn .4s ease-out forwards}@keyframes flashIn{0%{transform:translate(-50%,-50%) scale(.4);opacity:1}100%{transform:translate(-50%,-50%) scale(2);opacity:0}}#overlay{position:absolute;inset:0;background:rgba(7,10,22,.95);backdrop-filter:blur(20px);display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:100;cursor:pointer}#overlay.hidden{display:none}#overlay h2{font-size:48px;margin-bottom:10px;color:var(--beacon)}#overlay p{font-size:14px;color:var(--accent)}#win{position:absolute;inset:0;background:rgba(7,10,22,.95);backdrop-filter:blur(20px);display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:100}#win.hidden{display:none}#win h2{font-size:64px;margin-bottom:20px}</style></head><body><div class=shell><div class=card><div class=hud><div class=title>‚üÅ PulseQuest</div><div class=info>Pos: <span id=pos>1,1</span> | Dir: <span id=dir>E</span> | Steps: <span id=steps>0</span> <button class=menu-btn onclick=toggleDrawer() style=margin-left:15px>üó∫Ô∏è</button></div></div><div class=stage id=stage><div class=compass><div class=compass-inner><div class="compass-arrow n" id=compass-n>‚ñ≤</div><div class="compass-arrow e" id=compass-e>‚ñ∫</div><div class="compass-arrow s" id=compass-s>‚ñº</div><div class="compass-arrow w" id=compass-w>‚óÄ</div></div></div><div id=grid></div><div class=tap-hint>Tap Left: Move ‚Ä¢ Tap Right: Turn</div></div><div class=drawer id=drawer><div class=drawer-header><h3>Settings</h3><button class=close-btn onclick=toggleDrawer()>√ó</button></div><div class=settings><select id=mapSelect onchange=loadMap()><option value=0>Map: Empty</option><option value=1>Map: Simple Maze</option><option value=2>Map: Challenge</option></select></div></div></div></div><div id=overlay><h2>‚üÅ PulseQuest</h2><p>Tap to begin</p></div><div class=hidden id=win><h2>üéâ</h2><p>Treat found! Refresh to play again</p></div><script>const WIDTH=21,HEIGHT=7,DIR=["N","E","S","W"],DX=[0,1,0,-1],DY=[-1,0,1,0],COMPASS_IDS=["compass-n","compass-e","compass-s","compass-w"],MAPS=["EEEEEEEEEEEEEEEEEEEEE,EEEEEEEEEEEEEEEEEEEEE,EEEEEEEEEEEEEEEEEEEEE,EEEEEEEEEEEEEEEEEEEEE,EEEEEEEEEEEEEEEEEEEEE,EEEEEEEEEEEEEEEEEBEEE,EEEEEEEEEEEEEEEEEEEEE","WWWWWWWWWWWWWWWWWWWWW,WEEEEEWWWWWEEEEEEEWW,WEWWWEWWWWWEWWWWWEWW,WEWWWEEEEEEEWWWWWEWW,WEWWWWWWWWWWWEEEEEWW,WEEEEEEEEEEEEEWWWBEW,WWWWWWWWWWWWWWWWWWWWW","WWWWWWWWWWWWWWWWWWWWW,WEEEEEWEEEWEEEEEEEEWW,WEWWWEWWWWWEWEWWWEWW,WEEWEWEEEEEEEWWWBEWW,WEWWWWWWWWWWWEEEWEWW,WEEEEEEEEEEEEEEEEEWW,WWWWWWWWWWWWWWWWWWWWW"];let map=[],px=1,py=1,pd=1,steps=0,started=!1,beaconX=19,beaconY=5;function parseMap(E){return E.split(",").map(E=>E.split(""))}function getTile(E,e){return e>=0&&e<7&&E>=0&&E<21?map[e][E]:"W"}function render(){const E=document.getElementById("grid");E.innerHTML="";for(let e=0;e<7;e++)for(let t=0;t<21;t++){const W=document.createElement("div"),n=map[e][t];W.className="cell","B"===n?(W.classList.add("beacon"),W.innerHTML='<span class="icon">ü¶¥</span>'):"W"===n&&(W.classList.add("wall"),W.innerHTML='<span class="icon">üß±</span>'),t===px&&e===py&&(W.innerHTML='<span class="player">üêï</span>'),E.appendChild(W)}COMPASS_IDS.forEach((E,e)=>{const t=document.getElementById(E);t&&t.classList.toggle("active",e===pd)}),document.getElementById("pos").textContent=`${px},${py}`,document.getElementById("dir").textContent=DIR[pd],document.getElementById("steps").textContent=steps}function moveForward(){if(!started)return;const E=px+DX[pd],e=py+DY[pd];if(E<0||E>=21||e<0||e>=7)return;const t=getTile(E,e);"W"!==t&&(px=E,py=e,steps++,"B"===t&&document.getElementById("win").classList.remove("hidden"),render())}function turnRight(){started&&(pd=(pd+1)%4,render())}function loadMap(){const E=parseInt(document.getElementById("mapSelect").value);map=parseMap(MAPS[E]);for(let E=0;E<7;E++)for(let e=0;e<21;e++)"B"===map[E][e]&&(beaconX=e,beaconY=E);px=1,py=1,pd=1,steps=0,document.getElementById("win").classList.add("hidden"),render()}function toggleDrawer(){document.getElementById("drawer").classList.toggle("open")}const stageEl=document.getElementById("stage"),activePointers=new Map;function showFlash(E,e){const t=document.createElement("div");t.className="input-flash",t.style.left=E+"px",t.style.top=e+"px",document.body.appendChild(t),setTimeout(()=>t.remove(),400)}function start(){document.getElementById("overlay").classList.add("hidden"),started=!0,loadMap()}stageEl.addEventListener("pointerdown",E=>{started&&(E.preventDefault(),stageEl.setPointerCapture(E.pointerId),activePointers.set(E.pointerId,{x:E.clientX,y:E.clientY}),showFlash(E.clientX,E.clientY))},{passive:!1}),stageEl.addEventListener("pointerup",E=>{if(!activePointers.has(E.pointerId))return;try{stageEl.releasePointerCapture(E.pointerId)}catch{}const e=stageEl.getBoundingClientRect(),t=e.left+e.width/2,W=activePointers.get(E.pointerId).x;activePointers.delete(E.pointerId),W<t?moveForward():turnRight()}),stageEl.addEventListener("pointercancel",E=>{try{stageEl.releasePointerCapture(E.pointerId)}catch{}activePointers.delete(E.pointerId)}),document.addEventListener("keydown",E=>{"w"===E.key||"ArrowUp"===E.key?moveForward():"d"!==E.key&&"ArrowRight"!==E.key||turnRight()}),document.getElementById("overlay").addEventListener("pointerdown",start),loadMap()</script></body></html>